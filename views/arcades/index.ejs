<%- layout('layouts/boilerplate') %> 
    

    <h1 class="mt-0">All Arcades</h1>
    <div id="map" style="width: 100%; height: 600px; border: 1px solid white; border-radius: 20px;" class=""></div>
    <div class="mt-3" id="arcades">
        <% for (a of arcades) {%> 
            
            <div class="card" >
                <% if(a.images.length) {%> 
                    <img src="<%=a.images[0].url%>" class="card-img-top" alt="...">
                <% } else { %> 
                    <img src="https://images.unsplash.com/photo-1569267552473-440e5e08ee8c?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1100&q=80" class="card-img-top" alt="...">
                <% } %> 

                <div class="card-body p-4">
                    <h2 class="mt-1 card-title">
                        <%= a.title %>
                    </h2>
                    <p><%= a.location %></p>
                    <p><%= a.description.substring(0, 90) %> ...</p>

                    <br>
                    <h4 class="d-inline">From: $<%= a.price %> </h3>
                    <a href="/arcades/<%= a.id %>">
                        <button class="learn-more">
                            <span class="circle" aria-hidden="true">
                            <span class="icon arrow"></span>
                            </span>
                            <span class="button-text">Details</span>
                        </button>
                    </a>
                </div>
            </div>
        <% } %> 

    </div>

    <div class="d-none d-lg-block plusbutton justify-content-center align-items-center">
        <h2 id="newArcade" class="">New Arcade</h2>
        <a href="/arcades/new " ><button id="plus" class="d-inline"></button></a>
    </div>

    <script>
        const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
        const arcades = {features:<%- JSON.stringify(arcades)%>}
    </script>
    <script src="/js/clusterMap.js"></script>